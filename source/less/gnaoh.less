/*
 * This file contains the styling behind gnaoh.com.
 * Less.js is required to compile this stylesheet into browser CSS.
 *
 *  Map!
 * - Variables
 * - Mixins
 * - Page
 *      - Typography
 *      - Resets
 *      - Universials (e.g, responsive fluid grid, transitions)
 *      - HTML & Body level styling.
 *      - Navigator (Sidebar)
 *          - Logo 
 *              - Pyrimidine and Benzene aromatic rings
 *          - Navigation Links
 *      - Content & Post
 *          - Paragraphs, Headings, Sections
 *          - Videos
 *          - Image Galleries
 *              - Wall/Brick Styling
 *      - Media Queries for Responsive functionality.
 */
//variables
@font: 'Roboto', Helvetica, sans-serif;                                //default font
@font-size: 15px;                                                               //default font size
@color: #9371B3;                                                                //highlighted color
@color-dark: darken(@color,5%);                                                                //highlighted color
@selection: #7E7E7E;                                                    //selection color
@highlight: #7E7E7E;
@bg-color: #fff;                                                                //background color
@navigator-h: 175px;                                                            //height of sidebar
@navigator-w: 100%;                                                             //with of sidebar
@navigator-fc: #BBB;                                                            //font color of nav links
@post-width: 1000px;                                                            //max width of main post
@gallery-w: @post-width;                                                        //image gallery's width
@aromatics-size: 70px;                                                          //side of logo
@cssTransitionTime: 900ms;                                                      //default time for css transitions

@nl:`'\n'`;                                                                     //newline shorthand
@baseURL: '/library';                                        //URL for compilation


//common mixinables
.animated (@time: @cssTransitionTime; @type: all) {
    transition: ~'@{type}' @time cubic-bezier(0.25, 0.46, 0.45, 0.94);
    -webkit-transition: ~'@{type}' @time cubic-bezier(0.25, 0.46, 0.45, 0.94);
}
//arguments as follows: name, duration, easing, delay, iteration count, direction, fill
.key-animated (@name; @duration: 2s; @iteration: infinite; @easing: cubic-bezier(1,1,1,1); @delay: 0ms; @direction: normal; @fill: both) {
    animation: @name @duration @easing @delay @iteration @direction @fill;
    -webkit-animation: @name @duration @easing @delay @iteration @direction @fill;
}
//keyframe mixin. this is a really really ugly mixin hack. it's not possible until LESS implements mixins from variables.
.keyframes(@name; @from: none; @to: 'none;';  @vendor:~'';){
     @open: ~'@@{vendor}keyframes @{name} {@{nl}  from {@{nl}    @{vendor}@{from}@{nl}  }@{nl}  to {@{nl}    @{vendor}@{to}@{nl}  }@{nl}}@{nl}.@{name}';
 	@{open} {
      .key-animated(@name);
    }
}
.transform(@type; @value){
    @mixin: ~'@{type}(@{value})';
    transform: @mixin;
    -webkit-transform: @mixin;
}
.noselect (){
    -webkit-user-select: none;
    -moz-user-select: none;    
    -ms-user-select: none;   
}
.hide (){
    display: none;
}
.show (){
    display: block;
}
.fixed (){
    position: fixed;
}
.relative (){
    position: relative;
}
.absolute (){
    position: absolute;
}
// Typography
// @font-face {
//   font-family: 'Roboto';
//   font-style: normal;
//   font-weight: 300;
//   src: local('Roboto Light'), local('Roboto-Light'), url('@{baseURL}/fonts/roboto300.woff') format('woff');
// }
@font-face {
    font-family: 'Roboto';
    font-style: normal;
    font-weight: 300;
    src: local('Roboto Light'), local('Roboto-Light'), url(//themes.googleusercontent.com/static/fonts/roboto/v8/Hgo13k-tfSpn0qi1SFdUfT8E0i7KZn-EPnyo3HZu7kw.woff) format('woff');
}
// Page Layout
//Normalizer
* {
    margin: 0;
    padding: 0;
    outline: 0;
    border: 0;
    box-sizing: border-box;
    -moz-box-sizing: border-box;
    text-rendering: optimizeLegibility;
}
table {
    border-collapse:collapse;
    border-spacing: 0;
}
li {
    list-style: none;
}
img, video {
    width: 100%;
    vertical-align: middle;
    .noselect;
}
//responsive fluid grids
[class *= 'grid-'] {
    display: inline;
    float: left;
    padding: 0 0.5%;
}
//the parent wrappers of grid elements
.gridlock {
    float: none;
    & >:first-child {
        padding-left: 0;
    }
    & >:last-child {
        padding-right: 0;
    }
    .clearfix;
}
//grid widths
.grid-100   {width: 100% !important;}
.grid-80    {width:80% !important;}
.grid-75    {width:75% !important;}
.grid-66    {width:66.6% !important;}
.grid-60    {width:60% !important;}
.grid-50    {width:50% !important;}
.grid-40    {width:40% !important;}
.grid-33    {width:33.3% !important;}
.grid-25    {width:25% !important;}
.grid-20    {width:20% !important;}
.grid-10    {width:10% !important;}

//grid blank offsets
.grid-offset-80    {margin-left:80%;}
.grid-offset-75    {margin-left:75%;}
.grid-offset-66    {margin-left:66%;}
.grid-offset-60    {margin-left:60%;}
.grid-offset-50    {margin-left:50%;}
.grid-offset-40    {margin-left:40%;}
.grid-offset-33    {margin-left:33%;}
.grid-offset-25    {margin-left:25%;}
.grid-offset-20    {margin-left:20%;}
.grid-offset-10    {margin-left:10%;}

//universials
//.loading class will rotate the object continuously
.keyframes(loading, 'transform:none;', 'transform:rotate(360deg);');
.keyframes(loading, 'transform:none;', 'transform:rotate(360deg);', -webkit-);
.keyframes(gnidaol, 'transform:none;', 'transform:rotate(-360deg);');
.keyframes(gnidaol, 'transform:none;', 'transform:rotate(-360deg);', -webkit-);
 //default transition animation
.animated {
    .animated();
}
.no-height {
    max-height: 0;
    overflow: hidden;
}
.collapse {
	@collapsed-w: -@navigator-w*0.85;
	.transform(translate, '@{collapsed-w}, 0');
}
.clearfix {
    &:before, &:after {
        content:' ';
        display:table;
    }
     &:before, &:after {
        clear:both;
    }
}
html {
    overflow-y: scroll;
    overflow-x: hidden;
    body {
        font-family: @font;
        background: @bg-color;
        font-size: @font-size;
        line-height: 20px;
        vertical-align: middle;
    }
    //selection colors
    ::-moz-selection {
        background: @selection;
        color: #fff;
        text-shadow: none;
    }
    ::selection {
        background: @selection;
        color: #fff;
        text-shadow: none;
    }
}
#navigator {
    .clearfix;
    .noselect;
    height: @navigator-h;
    width: @navigator-w;
   //Branding Logo
    .logo {
        // .relative;
        margin:0 auto;
        width: @navigator-h - 25px;
        height: @navigator-h - 25px;
        //G (gangsta) Molecule
        .aromatics {
            position: relative;
            left: 13%;
            top: 1%;
            .pyrimidine, .benzene {
                position: absolute;
                .top {
                    width: 0;
                    border-bottom: @aromatics-size/4 solid @highlight;
                    border-left: @aromatics-size/2 * 0.866 solid transparent;
                    border-right: @aromatics-size/2 * 0.866 solid transparent;
                }
                .middle {
                    width: @aromatics-size * 0.866;   //width to heigh ratio is root(3) to 1
                    height: @aromatics-size/2;
                    background: @highlight;
                }
                .bottom {
                    width: 0;
                    border-top: @aromatics-size/4 solid @highlight;
                    border-left: @aromatics-size/2 * 0.866 solid transparent;
                    border-right: @aromatics-size/2 * 0.866 solid transparent;
                }
            }
            .benzene {
                left: @aromatics-size*0.43;
                top: @aromatics-size*0.755;
            }
            .flipper {
                .hide;
            }
            .kenny, .hoang, .gnaoh {
                color: @bg-color;
                .absolute;
				.animated(500ms);
                height: 0;
                width: 0;
            }
            .kenny {
                left: @aromatics-size/7;
                top: @aromatics-size/3;
            }
            .hoang {
                left: @aromatics-size/1.8;
                top: @aromatics-size*1.1;
                transform-origin: @aromatics-size/3 @aromatics-size/6;
                -webkit-transform-origin: @aromatics-size/3 @aromatics-size/6;
            }
           .gnaoh {
				opacity: 0;
                left: @aromatics-size*0.55;
                top: @aromatics-size*1.1;
                transform-origin: @aromatics-size/3 @aromatics-size/6;
                -webkit-transform-origin: @aromatics-size/3 @aromatics-size/6;
				.transform(rotate, -180deg);
            }
        }
        &:hover .hoang {
            opacity: 0;
            .transform(rotate, -180deg);
        }
        &:hover .gnaoh {
            opacity: 1;
            .transform(rotate, -360deg);
        }
    }
	//the list with all of them links
    #navlist {
        text-align: center;
        .absolute;
        width: 100%;
        .link {
            display: inline;
            margin:0 0.1em;
            padding:0 .5em;
            border-radius: 1px;
            a {
                color: #000;
                text-decoration: none;
            }
            &:hover, &.active {
                background: @highlight;
                a {
                    color: @bg-color;
                }
            }
        }
        &.fixed {
            position: fixed !important;
            top:0;
            padding: 0.25em 0;
            background: rgba(255, 255, 255, 0.85);
            z-index: 5;
        }
    }
}
//content page
#content {
    max-width: @post-width;
    margin: 0 auto;
    position: relative;
    padding: 2em;
    -webkit-perspective: 1000;
    perspective:1000;
}
#post {
    h1,h2,h3,h4 {
        color: @color-dark;
    }
    h1 {
        margin: 10px 0;
        font-size: @font-size*1.5;
    }
    a {
        color: @color;
        text-decoration: underline;
    }
    .cv {
        .category {
            margin-bottom: 0.75em;
            font-size: @font-size*1.75;
            color: @color-dark;
            padding-bottom: 5px;
            border-bottom: 1px solid @color-dark;
        }
        .position {
            transform-origin: left top;
            -webkit-transform-origin: left top;
            margin-bottom: 2em;
            .animated(150ms, all);
            
            .title {
                font-size: @font-size*1.2;
            }
            .date {
                color: @color-dark;
                margin-bottom: 0.5em;
            }
            .description {
                 li { 
                    list-style: circle inside;
                 }
            }
            .genus-species {
                font-style: italic;
            }
            &.active {
                .transform(scale, 1.3);
                border-left: 5px solid @color-dark;
                padding-left: 1em;
                margin-bottom: 4.5em;
                .title {
                    text-decoration: underline;
                }
            }
        }
    }
    &.flipped, &.deppilf {
        position: relative;
        -webkit-transform-style: preserve-3d;
        -webkit-backface-visibility: hidden;
        -webkit-perspective: 1000;
    }
    &.flipped {
        .transform(rotateY, 180deg);
    }
    &.deppilf {
        .transform(rotateY, -180deg);
    }
    #old-post, #new-post {
        max-width: @post-width;
        .animated;
        -webkit-backface-visibility: hidden;
        position: absolute;
        top: 0;
        left: 0;
    }
    #new-post{
        .transform(rotateY, -180deg);
    }
    //image galleries
    .gallery {
        margin: 10px 0;
        max-width: @gallery-w;
        overflow: hidden;
        .image {
            position: relative;
            margin: 10px 0;
            img{
                width: 100%;
                max-width: 100%;
                height: 100%;
                vertical-align: middle;
            }
            .caption {
                width: 100%;
                position: absolute;
                bottom: 0;
                background: rgba(0, 0, 0, 0.5);
                color: #fff;
                opacity: 0;
                padding: 0 0 0 1%;
                .animated(300ms);
            }
            //displays captions on hover
            &:hover > .caption {
                padding: 1.5% 0 1.5% 1%;
                opacity: 1;
            }
        }
            
        //the resizable gallery
        &.wall {
            .animated(400ms);
            .brick {
                max-width: 24.5%;
                margin: 0.25% 0;
                .animated(400ms);
                &.biggie {
                    max-width:  49.5%;
                    .caption {
                        padding: 1.5% 0 1.5% 1%;
                        opacity: 1;
                    }
                }
                &.top {
                    z-index: 5 !important;
                    .animated(400ms);
                }
                &.brick-hidden {
                    pointer-events: none;
                    z-index: 0;
                }
            }
            //hides the gallery when it's initializing 
            &.mortar {
                opacity: 0;
                .animated(0) !important;
                .brick {
                    .animated(0) !important;
                }
            }
        }
    }
    //video wrapper and UI
    .video {
        .relative;
        width: 100%;
        margin-bottom: 1em;
        overflow: hidden;
        .poster {
            .absolute;
            width: 100%;
            background-size:100%;
            background-repeat: no-repeat;
            background-clip: content-box;
        }
        video {
            max-width: 100%;
        }
    }
    
}


//tablets
@media (max-width:1024px) {
}
//Phones in landscape & Tablets in portrait
@media (max-width:768px) {
    @topbar-height: 2.5em;
    html {
    // converts the smaller grids to be 50%
    .grid-25,
    .grid-20,
    .grid-10 {
        .grid-50;
        }
    }
    .auto {
        .show !important;
    }
    #navigator {
        width: 100%;
        height: auto;
        z-index: 5;
        top: 0;
        position: fixed;
        .logo {
            width: 100%;
            height: @topbar-height;
            z-index: 10;
            right: 0;
                .aromatics {
                    top : auto;
                    left : auto;
                    right : @aromatics-size/2;
                    .absolute;
                    .transform(scale, 0.5);
                //hides everything but pyrimidine ring
                 & >:not(.pyrimidine) {
                    .hide;
                 }
                .pyrimidine {
                    .flipper {
                        .show;
                        width: 55%;
                        height: 15%;
                        margin: 0 auto;
                        position: relative;
                        top: 45%;
                        background: @bg-color;
                    }
                    .flipper:before {
                        content: '';
                        width: 100%;
                        height: 100%;
                        position: absolute;
                        top: -200%;
                        background: @bg-color;
                    }
                    .flipper:after {
                        content: '';
                        width: 100%;
                        height: 100%;
                        position: absolute;
                        top: 200%;
                        background: @bg-color;
                    }
                }
            }
        }
        #navlist {
            .relative;
            .hide;
            top: 0;
            opacity: 0.9;
            .link {
                .nav-child a {
                    padding-left: 75%;
                }
            }
        }
    }
    #content {
        margin:  @topbar-height*1.5 0.5em;
        padding: 0;
        #post {
            .cv {
                max-width: 100%;
            }
            .gallery {
                &.wall {
                    .animated(0ms);
                     .brick, li {
                        .animated(0ms);
                        max-width: 49.5%;
                        &.biggie {
                            max-width:  100%;
                        }
                    }
                }
            }
            .video {
                width: 100% !important;
                margin-bottom: 0.5em;
                video {
                    max-width: 100%;
                }
            }
        }
    }
}
//Phones in portrait layout
@media (max-width:480px) {
    //makes all grid items turn into 100% width
     [class *= 'grid-'] {
        width:100% !important;
        margin: auto 0;
    }
}
